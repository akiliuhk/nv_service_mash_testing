---
apiVersion: networking.istio.io/v1beta1
kind: ServiceEntry
metadata:
  name: internal-https-route
  namespace: istio-system
spec:
  endpoints:
  - address: istio-ingressgateway.istio-system.svc.cluster.local
  hosts:
  - '*.sst.suse.lab'
  - httpbin.example.com
  location: MESH_INTERNAL
  ports:
  - name: https
    number: 443
    protocol: TLS
  resolution: DNS
---
apiVersion: networking.istio.io/v1beta1
kind: Gateway
metadata:
  name: http-gateway
  namespace: istio-system
spec:
  selector:
    istio: ingressgateway
  servers:
  - hosts:
    - '*'
    port:
      name: http
      number: 80
      protocol: HTTP
---
apiVersion: networking.istio.io/v1beta1
kind: Gateway
metadata:
  name: https-gateway
  namespace: istio-system
spec:
  selector:
    istio: ingressgateway
  servers:
  - hosts:
    - '*'
    port:
      name: https
      number: 443
      protocol: HTTPS
    tls:
      credentialName: wildcard-home-secret
      httpsRedirect: false
      mode: SIMPLE
